:root{
  --bg:#0c0f14; --panel:#0f131a; --panel-2:#0b0f15;
  --ink:#e8edf5; --muted:#8ea0b5; --line:#1b2431;
  --accent:#4aa3ff; --like:#ff4d7a; --shadow:0 12px 36px rgb(0 0 0 / .28);
  --grad1:#1b4aaf;
  --fa-h: 44px; /*tamaño del success*/              
  --fa-icon-w: var(--fa-h);         
  --fa-gutter: 24px;        
  --fa-max: 400px;          
}


*{ box-sizing:border-box }
html,body{ min-height:100% }
body{
  margin:0;
  background: linear-gradient(360deg, var(--grad1) -40%, var(--bg) 400px);
  color:var(--ink);
  font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;

}
.handle { display: none !important; }

/* Layout */
.shell{ display:grid; grid-template-columns:1fr min(760px,100%) 1fr; }
.feed-col{ grid-column:2; min-height:100dvh; border-inline:1px solid var(--line);
  background:linear-gradient(180deg, color-mix(in srgb, var(--panel) 92%, transparent), var(--panel)); }

/* Header */
.feed-head{
  position:sticky; top:0; z-index:5; display:flex; align-items:baseline; gap:10px;
  padding:14px 18px; background:color-mix(in srgb, var(--panel) 85%, transparent);
  border-bottom:1px solid var(--line); backdrop-filter:saturate(140%) blur(8px);
}
.feed-head h1{ margin:0; font-size:20px; font-weight:800; letter-spacing:.2px }
.feed-head .sub{ color:var(--muted); font-size:13px; font-weight:600 }

/* Composer */
.composer{ display:grid; grid-template-columns:56px 1fr; gap:12px; padding:16px;
  border-bottom:1px solid var(--line); background:var(--panel); }
.avatar{
  width:44px; height:44px; border-radius:50%; display:grid; place-items:center;
  overflow:hidden; background:#121a26; color:#a7b7cd; border:1px solid var(--line); font-weight:800;
}
.compose{ display:flex; flex-direction:column; gap:12px }
.compose__input{
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:12px 14px;
  border-radius:14px;
  background:#121a26;
  border:1px solid var(--line);
}
.compose__input textarea{
  width:100%;
  min-height:70px;
  max-height:180px;
  resize:vertical;
  border:0;
  padding:0;
  background:transparent;
  color:var(--ink);
  outline:0;
  font:inherit;
}
.compose__input textarea::placeholder{ color:var(--muted); }
.compose__input textarea:disabled{ opacity:.55; cursor:not-allowed; }
.compose__previews{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:flex-start;
}
.compose__previews[hidden]{ display:none; }
.compose__preview-item{
  position:relative;
  border-radius:12px;
  border:1px solid color-mix(in srgb, var(--line) 60%, transparent);
  background:#0b0f15;
  max-width:50%;
  max-height:150px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.compose__preview-item img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  display:block;
  object-fit:contain;
}
.compose__preview-remove{
  position:absolute;
  top:8px;
  right:8px;
  border:0;
  background:rgba(12, 15, 20, 0.75);
  color:#fff;
  width:28px;
  height:28px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:background .2s ease, transform .06s ease;
}
.compose__preview-remove:hover{
  background:rgba(12, 15, 20, 0.95);
  transform:translateY(-1px);
}
.compose__preview-remove:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.row{ display:flex; gap:10px; justify-content:flex-end }
.btn{
  border:1px solid var(--line); background:#162034; color:var(--ink);
  padding:8px 14px; border-radius:999px; font-weight:800; cursor:pointer;
  transition:transform .06s ease, opacity .2s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ transform:translateY(-1px) } .btn:active{ transform:translateY(0) }
.btn.primary{ background:var(--accent); border-color:color-mix(in srgb, var(--accent) 70%, black); color:#fff }
.btn.ghost{ background:transparent }
.btn:disabled{ opacity:.55; cursor:not-allowed }
.composer__pick--locked{
  pointer-events:none;
  opacity:.55;
  cursor:not-allowed;
}

/* Feed */
#feed{ display:grid; gap:16px; padding:16px }

.post{
  background:linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
  border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  transition:transform .06s ease, border-color .2s ease, box-shadow .2s ease;
  position: relative; /* overlay se posiciona respecto de esto */
}
.post:hover{
  transform:translateY(-1px);
  border-color:color-mix(in srgb, var(--line) 60%, var(--accent) 30%);
  cursor: pointer; /* feedback de clic */
}
.post-header{ display:flex; align-items:center; gap:12px; padding:14px 16px 0 }

.meta{ min-width:0 } .name{ font-weight:800; letter-spacing:.2px; line-height:1.2; overflow-wrap:anywhere }
.subline{ display:flex; align-items:center; gap:6px; margin-top:2px; color:var(--muted); font-weight:600; font-size:13px }
.subline .dot{ color:var(--muted) }
.text{ padding:10px 16px 0; white-space:pre-wrap; overflow-wrap:anywhere }

.media{
  margin:10px auto 0;
  border-radius:12px;
  border:1px solid var(--line);
  background:#0b0f15;
  width:min(420px, calc(100% - 32px));
  max-width:100%;
  max-height:150px;
  cursor:zoom-in;
  transition:transform .2s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.media:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.media img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  display:block;
  object-fit:contain;
}
.media:hover{
  transform:translateY(-1px);
}

.actions{ display:flex; gap:10px; align-items:center; padding:12px 16px 14px; }

/* Footer */
.load-more{ display:flex; justify-content:center; align-items:center; gap:10px; padding:18px; border-top:1px solid var(--line) }
.spinner{
  width:18px; height:18px; border-radius:50%;
  border:2px solid color-mix(in srgb, var(--ink) 20%, transparent);
  border-top-color:var(--accent); animation:spin 1s linear infinite;
}
.chip{
  border:1px solid var(--line);
  background:transparent;
  color:var(--muted);
  padding:6px 12px;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
  transition: background .2s ease, color .2s ease, border-color .2s ease;
}
.chip:hover{ background:#162034; color:var(--ink); }
.chip[disabled]{ opacity:.55; cursor:not-allowed; }
@keyframes spin{ to{ transform:rotate(360deg) } }

/* responsivo */
@media (max-width:560px){
  .name{ font-size:15px } .subline{ font-size:13px }
  .media{ max-width:100%; }
  .compose__preview-item{ max-width:100%; }
}

/* Estado visual de like activo (rojo) */
.chip.like.liked{
  border-color: var(--like);
  color: #fff;
  background: color-mix(in srgb, var(--like) 30%, transparent);
}

.post-overlay {
  position: absolute;
  inset: 0;
  display: block;
  z-index: 50;            /* más bajo que el botón like */
  text-indent: -9999px;   /* invisible */
  pointer-events: auto;   /* clickeable en general */
}

/* El contenido normal se dibuja encima del overlay */
/* NO tocar al menú */
.post > *:not(.post-overlay):not(.post-menu) {
  position: relative;
  z-index: 100;
}

/* El menú, ahora sí */
.post > .post-menu {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 250;
}

/* Botón like SIEMPRE por encima del overlay */
.post .chip.like {
  position: relative;
  z-index: 200;    /* más alto que overlay */
  pointer-events: auto; /* debe recibir clicks */
}

/* Menú contextual del post */
.post-menu{
  position:absolute;
  top:12px;
  right:12px;
  z-index:250;
}
.post-menu__toggle{
  border:0;
  background:rgba(18, 26, 38, 0.7);
  color:var(--muted);
  width:32px;
  height:32px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-size:18px;
  cursor:pointer;
  transition:background .2s ease, color .2s ease, transform .06s ease;
}
.post-menu__toggle:hover{
  background:rgba(18, 26, 38, 0.95);
  color:var(--ink);
  transform:translateY(-1px);
}
.post-menu__toggle:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.post-menu__dropdown{
  position:absolute;
  top:40px;
  right:0;
  min-width:180px;
  background:#121a26;
  border:1px solid var(--line);
  border-radius:12px;
  padding:8px;
  box-shadow:0 12px 30px rgb(0 0 0 / .35);
  display:none;
}
.post-menu.is-open .post-menu__dropdown{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.post-menu__item{
  width:100%;
  text-align:left;
  padding:8px 10px;
  border-radius:8px;
  border:0;
  background:transparent;
  color:var(--ink);
  font-weight:600;
  cursor:pointer;
  transition:background .2s ease, color .2s ease;
}
.post-menu__item:hover{
  background:#1c293b;
}
.post-menu__item--danger{
  color:color-mix(in srgb, var(--like) 80%, white 10%);
}
.post-menu__item--danger:hover{
  background:color-mix(in srgb, var(--like) 20%, transparent);
}

/* Lightbox para imágenes */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  padding:24px;
  z-index:9000;
}
.lightbox.is-open{ display:flex; }
.lightbox__content{
  position:relative;
  max-width:min(90vw, 960px);
  max-height:90vh;
}
.lightbox__content img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.1);
  background:#0b0f15;
}
.lightbox__close{
  position:absolute;
  top:10px;
  right:10px;
  width:36px;
  height:36px;
  border-radius:50%;
  border:0;
  background:rgba(0,0,0,.55);
  color:#fff;
  font-size:22px;
  display:grid;
  place-items:center;
  cursor:pointer;
  transition:background .2s ease;
}
.lightbox__close:hover{
  background:rgba(0,0,0,.8);
}
.lightbox__close:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

/*success del login*/
.fancy-alert{
  width:var(--fa-icon-w); height:var(--fa-h);
  position:fixed; left:0; right:0; top:0; margin:0 auto;
  z-index:1020; overflow:hidden; border-radius:2px;
  background:gray; box-shadow:0 2px rgba(0,0,0,.12);
  border-bottom:3px solid rgba(0,0,0,.16);
  opacity:0; transform:scale(0); transform-origin:top center;
  transition:all .5s;
  will-change: transform, opacity;
  contain: layout paint;
}
.fancy-alert.fancy-alert__active{
  opacity:1; top:20px; transform:scale(1);
}

.fancy-alert.fancy-alert__extended{
  width:min(var(--fa-max), calc(100vw - var(--fa-gutter) * 2));
  max-width:100%;
}
.fancy-alert .fancy-alert--content{
  position:relative;
  height:100%; opacity:0;
  padding:0;
  transition:opacity .5s;
  padding-left: calc(var(--fa-icon-w));
}
.fancy-alert .fancy-alert--words{
  font-size:15px; font-weight:700; line-height:var(--fa-h);
  padding:0 16px 0 calc(var(--fa-icon-w) + 40px);
  max-width:90%;
  position:relative;  opacity:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  transition: transform .3s .5s, opacity .3s .5s;
  transform: translateY(-22px);
  top:auto;
}
.fancy-alert.fancy-alert__extended .fancy-alert--content{ opacity:1; }
.fancy-alert.fancy-alert__extended .fancy-alert--words{ top:0; opacity:1;transform: translateY(0); }
.fancy-alert .fancy-alert--icon{
  float:none;
  position:absolute;
  width: var(--fa-icon-w);
  top:0; bottom:0; left:0;
  height: 100%;
  display: grid;
  place-items: center;   
  font-size: calc(var(--fa-h) * .42);
  line-height: 1;
  background: rgba(0,0,0,.15);
  padding: 0;            
}
.fancy-alert.error{   background:#D64646; }
.fancy-alert.success{ background:#3CB971; }
.fancy-alert.info{    background:#E8C22C; color:#0b0b0b; }
.fancy-alert.info .fancy-alert--icon{ color:inherit; }
